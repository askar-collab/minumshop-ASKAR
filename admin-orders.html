<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin Order | MINUMSHOP</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
body{
  font-family:Poppins;
  background:#fff7ed;
  padding:20px
}
h2{text-align:center}

.card{
  background:white;
  padding:18px;
  border-radius:16px;
  margin-bottom:15px;
  box-shadow:0 10px 30px rgba(0,0,0,.1)
}

select{
  padding:8px;
  border-radius:8px;
  border:1px solid #ccc;
  font-weight:600
}

button{
  padding:10px 16px;
  border:none;
  border-radius:999px;
  font-weight:700;
  cursor:pointer
}
.save{background:#22c55e;color:white}
.back{background:#64748b;color:white;width:100%;margin-top:20px}
.badge{
  padding:5px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:700
}
.pending{background:#fde68a}
.proses{background:#bfdbfe}
.selesai{background:#bbf7d0}
.batal{background:#fecaca}
</style>
</head>

<body>

<h2>üßë‚Äçüíº Kelola Pesanan</h2>
<div id="list"></div>

<button class="back" onclick="location.href='product-admin.html'">
‚¨Ö Kembali Admin
</button>

<script>
/* AUTH */
if(localStorage.getItem("role")!=="admin"){
  alert("Akses ditolak");
  location.href="login.html";
}

let orders = JSON.parse(localStorage.getItem("orders")) || [];
const list=document.getElementById("list");

if(orders.length===0){
  list.innerHTML="<p style='text-align:center'>Belum ada pesanan</p>";
}

orders.forEach((o,i)=>{
  list.innerHTML+=`
  <div class="card">
    <b>${o.user}</b><br>
    <small>${o.tanggal}</small><br><br>

    Total: <b>Rp ${o.total}</b><br>
    Metode: ${o.metode}<br><br>

    Status:
    <select onchange="ubah(${i},this.value)">
      <option value="pending" ${o.status==="pending"?"selected":""}>Pending</option>
      <option value="proses" ${o.status==="proses"?"selected":""}>Diproses</option>
      <option value="selesai" ${o.status==="selesai"?"selected":""}>Selesai</option>
      <option value="batal" ${o.status==="batal"?"selected":""}>Batal</option>
    </select>

    <span class="badge ${o.status}">${o.status}</span>
  </div>`;
});

function ubah(i,val){
  orders[i].status=val;
  localStorage.setItem("orders",JSON.stringify(orders));
  location.reload();
}
</script>

</body>
</html>
