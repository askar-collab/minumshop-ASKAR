<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login | MINUMSHOP</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#ffedd5,#fdba74,#fb923c);
  background-size:300% 300%;
  animation:bg 10s infinite;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.box{
  background:white;
  padding:32px;
  border-radius:18px;
  width:320px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  position:relative;
}
h2{text-align:center;color:#ea580c}
input,select,button{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:14px;
}
button{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  border:none;
  color:white;
  font-weight:700;
  cursor:pointer;
  transition:.3s;
}
button:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 20px rgba(34,197,94,.4);
}
.switch{
  margin-top:14px;
  text-align:center;
  font-size:13px;
  cursor:pointer;
  color:#2563eb;
}
.password-box{position:relative}
.eye{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}
.footer{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  color:#64748b;
}

/* TOAST */
.toast{
  position:absolute;
  top:-60px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 18px;
  border-radius:999px;
  font-size:13px;
  color:white;
  opacity:0;
  pointer-events:none;
}
.toast.show{animation:toast .4s ease forwards}
.success{background:#22c55e}
.error{background:#ef4444}
@keyframes toast{
  from{opacity:0;top:-40px}
  to{opacity:1;top:-10px}
}
</style>
</head>

<body>

<div class="box">
  <div id="toast" class="toast"></div>

  <h2>üçπ MINUMSHOP</h2>

  <input id="username" placeholder="Username">

  <div class="password-box">
    <input id="password" type="password" placeholder="Password">
    <span class="eye" onclick="togglePass()">üëÅ</span>
  </div>

  <select id="role">
    <option value="buyer">Buyer</option>
    <option value="admin">Admin</option>
  </select>

  <button onclick="login()">Login</button>

  <div class="switch">
    Buyer akan tersimpan otomatis (tanpa daftar ulang)
  </div>

  <div class="footer">
    Created by <b>ASKAR</b><br>
    "Hanya Untuk Demo E-Commerce Informatika"
  </div>
</div>

<script>
function toast(msg,type){
  const t=document.getElementById("toast");
  t.className=`toast ${type} show`;
  t.innerText=msg;
  setTimeout(()=>t.className="toast",2200);
}

function togglePass(){
  const p=document.getElementById("password");
  p.type=p.type==="password"?"text":"password";
}

function login(){
  const user=username.value.trim();
  const pass=password.value.trim();
  const role=document.getElementById("role").value;

  if(!user||!pass){
    toast("Username & Password wajib diisi","error");
    return;
  }

  /* ADMIN */
  if(role==="admin"){
    if(user==="admin" && pass==="a2026a"){
      toast("Login Admin Berhasil","success");
      localStorage.setItem("loggedIn","true");
      localStorage.setItem("role","admin");
      localStorage.setItem("currentUser","admin");
      setTimeout(()=>location.href="index.html",1200);
    }else{
      toast("Login Admin Gagal","error");
    }
    return;
  }

  /* BUYER AUTO REGISTER */
  let buyers=JSON.parse(localStorage.getItem("buyers"))||[];

  let buyer=buyers.find(b=>b.username===user);

  if(!buyer){
    buyers.push({username:user,password:pass});
    localStorage.setItem("buyers",JSON.stringify(buyers));
    toast("Akun baru tersimpan otomatis","success");
  }else if(buyer.password!==pass){
    toast("Password salah","error");
    return;
  }

  localStorage.setItem("loggedIn","true");
  localStorage.setItem("role","buyer");
  localStorage.setItem("currentUser",user);

  setTimeout(()=>location.href="index.html",1200);
}
</script>

</body>
</html>
