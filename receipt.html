<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Struk Pembelian | MINUMSHOP</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: Poppins;
  background: #f8fafc;
  display: flex;
  justify-content: center;
  padding: 40px;
}
.struk {
  background: white;
  width: 320px;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,.1);
}
h2 {
  text-align: center;
  margin-bottom: 5px;
}
p {
  text-align: center;
  margin: 0;
  font-size: 13px;
}
hr {
  margin: 12px 0;
  border: none;
  border-top: 1px dashed #ccc;
}
.item {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
}
.total {
  font-weight: 700;
  margin-top: 10px;
  display: flex;
  justify-content: space-between;
}
button {
  width: 100%;
  margin-top: 15px;
  padding: 8px;
  border: none;
  background: #16a34a;
  color: white;
  border-radius: 8px;
  cursor: pointer;
}
@media print {
  button { display: none }
  body { background: white }
}
</style>
</head>

<body>

<script>
if (localStorage.getItem("role") !== "buyer") {
  alert("Akses ditolak");
  location.href = "index.html";
}

const orders = JSON.parse(localStorage.getItem("orders")) || [];
const order = orders[orders.length - 1];
</script>

<div class="struk" id="struk">
  <h2>üçπ MINUMSHOP</h2>
  <p>Jl. Contoh No. 123</p>
  <p>Telp: 0812-0000-0000</p>

  <hr>

  <div id="items"></div>

  <hr>

  <div class="total">
    <span>Total</span>
    <span id="total"></span>
  </div>

  <hr>

  <p id="tanggal"></p>

  <button onclick="window.print()">üßæ Cetak Struk</button>
</div>

<script>
const itemsEl = document.getElementById("items");
const totalEl = document.getElementById("total");
const tglEl = document.getElementById("tanggal");

if (!order) {
  itemsEl.innerHTML = "<p>Tidak ada pesanan</p>";
} else {
  order.items.forEach(i => {
    itemsEl.innerHTML += `
      <div class="item">
        <span>${i.nama} x ${i.qty}</span>
        <span>Rp ${i.harga * i.qty}</span>
      </div>
    `;
  });

  totalEl.innerText = "Rp " + order.total;
  tglEl.innerText = order.tanggal;
}
</script>

</body>
</html>
